@model moeKino.Models.Film

@{
    ViewBag.Title = "Details";
}

<h2 style="color:#f1d8b3;" class="text-center mb-5"><u>@Model.Name</u></h2>
@if (User.IsInRole("User")) {
<p style="margin-left: 14%;color: white;">
    <span class="starRating">

        <input id="rating10" type="radio" name="rating" value="10">
        <label for="rating10" title="10">10</label>
        <input id="rating9" type="radio" name="rating" value="9">
        <label for="rating9" title="9">9</label>
        <input id="rating8" type="radio" name="rating" value="8">
        <label for="rating8" title="8">8</label>
        <input id="rating7" type="radio" name="rating" value="7">
        <label for="rating7" title="7">7</label>
        <input id="rating6" type="radio" name="rating" value="6">
        <label for="rating6" title="6">6</label>
        <input id="rating5" type="radio" name="rating" value="5">
        <label for="rating5" title="5">5</label>
        <input id="rating4" type="radio" name="rating" value="4">
        <label for="rating4" title="4">4</label>
        <input id="rating3" type="radio" name="rating" value="3" checked>
        <label for="rating3" title="3">3</label>
        <input id="rating2" type="radio" name="rating" value="2">
        <label for="rating2" title="2">2</label>
        <input id="rating1" type="radio" name="rating" value="1">
        <label for="rating1" title="1">1</label>
    </span>
    <button type="button" class="btn btn-sm btn-danger" onclick="here()">Rate</button>

    <span id="done" class="ml-4 font-weight-bold"></span>

</p>
}
<div class="row">
    @if (User.IsInRole("Admin"))
    {
        <div class="col-5">
            <table class="w-75 text-justify" style="margin-left: 25%;color:#f1d8b3;">
                <tr>
                    <td style="width:600px;">

                        <dl class="dl-horizontal">

                            <dt>
                                @Html.DisplayNameFor(model => model.Genre)
                            </dt>

                            <dd class="text-white">
                                @Html.DisplayFor(model => model.Genre)
                            </dd>

                            <dt>
                                @Html.DisplayNameFor(model => model.Audience)
                            </dt>

                            <dd class="text-white">
                                @Html.DisplayFor(model => model.Audience)
                            </dd>
                            <dt>
                                @Model.Rating.ToString("#.##")                              
                            </dt>

                            <dd class="text-white">
                                @Html.DisplayFor(model => model.Rating)
                            </dd>
                            <dt>
                                @Html.DisplayNameFor(model => model.Time)
                            </dt>

                            <dd class="text-white">
                                @Html.DisplayFor(model => model.Time)
                            </dd>
                            <dt>
                                @Html.DisplayNameFor(model => model.Director)
                            </dt>

                            <dd class="text-white">
                                @Html.DisplayFor(model => model.Director)
                            </dd>

                            <dt>
                                @Html.DisplayNameFor(model => model.ReleaseDate)
                            </dt>

                            <dd class="text-white">
                                @Html.DisplayFor(model => model.ReleaseDate)
                            </dd>

                            <dt>
                                @Html.DisplayNameFor(model => model.ShortDescription)
                            </dt>

                            <dd class="text-white">
                                @Html.DisplayFor(model => model.ShortDescription)
                            </dd>

                            <dt>
                                @Html.DisplayNameFor(model => model.Stars)
                            </dt>

                            <dd class="text-white">
                                @Html.DisplayFor(model => model.Stars)
                            </dd>


                        </dl>
                    </td>
            </table>
        </div>
        <div class="col-2">
            <img class="s3" src="@Url.Content(@Model.Url)" width="200px" />

        </div>
        <div class="col-4 mt-3" style="margin-left:5%;color:#f1d8b3;">
            @{
                if (Model.clients.Capacity != 0)
                {
                    <h2><img src="http://beta1.logisoft-cy.net/wp-content/uploads/2014/09/group1.png" width="50px">  Clients:</h2>
                    foreach (moeKino.Models.Client c in Model.clients)
                    {
                        <ul>
                            <li>
                                <a href="/Clients/Details/@c.ClientId">@c.Name</a>
                            </li>
                        </ul>

                    }
                }
                else
                {
                    <h3><img src="http://beta1.logisoft-cy.net/wp-content/uploads/2014/09/group1.png" width="50px">  No clients</h3>
                }
            }

        </div>
    }
    else
    {
        <div class="col-7">
            <table class="w-75 text-justify" style="margin-left: 25%;color:#f1d8b3;">
                <tr>
                    <td style="width:600px;">

                        <dl class="dl-horizontal">

                            <dt>
                                @Html.DisplayNameFor(model => model.Genre)
                            </dt>

                            <dd class="text-white">
                                @Html.DisplayFor(model => model.Genre)
                            </dd>

                            <dt>
                                @Html.DisplayNameFor(model => model.Audience)
                            </dt>

                            <dd class="text-white">
                                @Html.DisplayFor(model => model.Audience)
                            </dd>

                            <dt>
                                @Html.DisplayNameFor(model => model.Rating)
                            </dt>

                            <dd class="text-white" id="rate">
                                @Model.Rating.ToString("#.##")
                            </dd>
                            <dt>
                                @Html.DisplayNameFor(model => model.Time)
                            </dt>

                            <dd class="text-white">
                                @Html.DisplayFor(model => model.Time)
                            </dd>
                            <dt>
                                @Html.DisplayNameFor(model => model.Director)
                            </dt>

                            <dd class="text-white">
                                @Html.DisplayFor(model => model.Director)
                            </dd>

                            <dt>
                                @Html.DisplayNameFor(model => model.ReleaseDate)
                            </dt>

                            <dd class="text-white">
                                @Html.DisplayFor(model => model.ReleaseDate)
                            </dd>

                            <dt>
                                @Html.DisplayNameFor(model => model.ShortDescription)
                            </dt>

                            <dd class="text-white">
                                @Html.DisplayFor(model => model.ShortDescription)
                            </dd>

                            <dt>
                                @Html.DisplayNameFor(model => model.Stars)
                            </dt>

                            <dd class="text-white">
                                @Html.DisplayFor(model => model.Stars)
                            </dd>


                        </dl>
                    </td>
            </table>
        </div>
        <div class="col-3">
            <img class="s3" src="@Url.Content(@Model.Url)" width="250px" />

        </div>

    }
</div>

<p style="padding-left:10%">
    <a href="/Films/Index"> <img src="https://cdn2.iconfinder.com/data/icons/office-elements/512/operation-back.png" width="60px;"> </a>
    @if (User.IsInRole("Admin"))
    {
        @Html.ActionLink("Edit", "Edit", new { id = Model.Id }, new { @class = "btn ml-2", @style = "background-color:rgb(3,174,218);color:white;" })
    }
</p>

<script>

   function here(){
       var rate = $('input:checked')[0].value;
       var clientid = "@ViewBag.Id";
       var movieId="@Model.Id"
       $.ajax({
           url: '/Films/Details',
           type: 'POST',
           dataType: 'json',
           data: { 'userRate': rate, 'id': movieId, 'clientId': clientid },
           success: function (response) {
               if (response.success) {
                   $('#done').html(response.responseText);
                   $('#rate').html(response.rate);
               } else {
                   $('#done').html(response.responseText);
                  
               }
           },
           error: function (response) {
               alert("error!");  
           }
           
       });
    }

    

</script>